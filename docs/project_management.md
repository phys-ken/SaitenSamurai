# 採点侍 プロジェクト管理ドキュメント

## プロジェクト概要

採点侍は、教育現場での試験採点作業を効率化するためのPythonベースのアプリケーションです。スキャンした解答用紙から特定領域を切り出し、採点プロセスを自動化・効率化します。以前の「採点斬り2021」をベースに、UI/UXの大幅な改善と機能強化を行っています。

## プロジェクト構成

```
SaitenSamurai/
├── src/                   # ソースコード
│   ├── core/             # 採点、マーキング、トリミングなどのコア機能
│   ├── models/           # データモデル定義
│   ├── ui/               # ユーザーインターフェース
│   │   └── components/   # UIコンポーネント
│   └── utils/            # ユーティリティ関数
├── resources/             # アイコン、画像などのリソース
├── setting/               # 設定ファイルとデータディレクトリ
│   ├── input/            # スキャン画像の入力ディレクトリ
│   ├── output/           # 採点結果の出力ディレクトリ
│   ├── export/           # エクスポートされたデータ
│   └── answerdata/       # 模範解答用の入出力ディレクトリ
├── test_figs/            # テスト用の画像ファイル
├── tests/                # テストコード
│   └── samples/          # テスト用サンプル画像
├── legacy/               # 旧バージョンのコード
├── docs/                 # ドキュメント
├── main.py               # エントリーポイント
└── build.py              # ビルドスクリプト
```

## 主要機能

- **解答用紙の切り取り**: 
  - 視覚的な領域選択インターフェース
  - バッチ処理による一括切り出し
  - 模範解答の切り出し機能

- **採点機能**:
  - 1枚ずつの採点モード
  - グリッド表示による一覧採点
  - 複数の採点スタイル（個別クリック、連続クリック、数字キー連続採点）
  - 採点状況のリアルタイム表示と進捗管理

- **結果出力**:
  - Excel形式での得点集計表出力
  - 採点済み解答用紙の生成
  - 〇×△マークや得点表示のカスタマイズオプション

## 開発環境

- Python 3.10以上
- 必要なライブラリ：
  - OpenCV (画像処理)
  - NumPy (数値計算)
  - Pandas (データ処理)
  - Tkinter (UI)
  - Pillow (画像処理)
  - openpyxl (Excel出力)

## ビルドプロセス

アプリケーションのビルドは、同梱のビルドスクリプトを使用して行います：

```bash
# Windowsでビルドする場合
build.bat

# または
python build.py
```

ビルドが成功すると、`dist`フォルダに`採点侍.exe`が作成されます。

## テスト

テストはpytestを使用して実行します：

```bash
pytest tests/
```

主要なテストケース：
- `test_grade_process.py`: 採点処理のテスト
- `test_marubatu_function.py`: マルバツ機能のテスト
- `test_export_options.py`: エクスポート機能のテスト
- `test_grid_view.py`: グリッド表示のテスト
- `test_temp_files.py`: 一時ファイル処理のテスト

## リリースプロセス

1. テストの実行と確認
2. バージョン番号の更新（main.pyのVERSION変数）
3. PyInstallerでの実行ファイル作成
4. GitHubリリースの作成

## 今後の開発予定

- [ ] PDF読み取り機能: PDFファイルから直接解答用紙を読み込む機能
- [ ] PDF書き出し機能: 採点結果をPDF形式で出力する機能
- [ ] AI連携機能: 解答内容の自動認識と採点支援
- [ ] 採点履歴の詳細表示・検索機能
- [ ] バッチ処理の高速化・並列処理対応
- [ ] カラー保存時の最適化改善

## メンテナンス情報

- 最終更新日: 2025年5月7日
- メンテナー: phys_ken
- 連絡先: [note](https://note.com/phys_ken)
- ライセンス: GPLv3.0